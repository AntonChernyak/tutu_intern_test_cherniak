# Приложение "Покемоны"
## О приложении
 
Является тестовым заданием для прохождения стажировки в "Туту.ру". 

**Реализовано:**
* Разбиение приложения на 3 модуля - data, domain, presentation;
* внедрение зависимостей через Dagger 2;
* presentation слой организован по паттерну MVVM;
* инъекция ViewModel во фрагмент через Subcomponent; 
* передача данных во фрагменты через LiveData;
* загрузка данных из сети с помощью библиотеки Retrofit;
* сериализация и десериализация данных с помощью kotlinx.serialization;
* скроллинг списка с пагинацией с помощью библиотеки Paging Library 3;
* обновление данных в списке с помощью swipe-to-refresh;
* offline режим - сохранение последних загруженных данных с помощью библиотеки Room;
* использованы Kotlin Coroutines для организации многопоточности; 
* передача данных состояния ui между сломи приложения через Kotlin StateFlow;
* навигация в приложении с помощью библиотеки Navigation Component;
* передача имени покемона на экран с детальным описанием через аргументы Navigation Component;
* загрузка изображений покемонов с помощью библиотеки Glide;
* представление характеристик покемонов в списке с выдающими элементами с помощью библиотеки AdapterDelegates; 
* обновления данных во всех списках с помощью DiffUtils;
* Unit-тесты интерактора.

Приложение состоит из двух экранов:
1. экран со списком покемонов;
1. экран с детальным описанием покемона.

## Экран со списком покемонов
<img src="https://i.ibb.co/5nV2p5Z/list-cherniak.png" width="300"> <img src="https://i.ibb.co/P5MKNk4/list-error-cherniak.png" width="300">

**Экран включает:**
* Toolbar с заголовком экрана;
* RecyclerView со списком покемонов;
* каждый элемент RecyclerView находится внутри CardView и включает в себя имя покемона и его изображение;
* TextView с сообщением об отсутствии данных;
* TextView с сообщением об отстуствии подключения к сети;
* ProgressBar видимый во время загрузки;
* основной контейнер - LinearLayout, вложенный контейнер - FrameLayout;

**Поведение:**
* При нажатии на элемент списка осуществляется переход на экан с детальным описанием выбранного покемона;
* организован SwipeToRefresh - если в RecyclerView проскроллен до самого верха, то следующая попытка сделать скролл вниз (потянуть вниз) обновит данные в RecyclerView;
* первичная загрузка при старте приложения - 20 элементов, последующая подгрузка при необходимости - 10 элементов.
* при первоначальной загрузке или обновлении ProgressBar показывается по центру, а при подгрузке вместо нижнего или верхнего ViewHolder'а - в зависимости от направления скролла. Организовано инструментами Paging Library.
* также инструментами PagingLibrary организовано кэширование 50 элементов списка;
* при загрузке из сети данные сразу же сохраняются в базу данных;
* если сети нет, то данные берутся из БД;
* если при загрузке не удалось получить данные из сети или БД, то по центру экрана показывается TextView с сообщением об отсутствии данных и о возможности обновить данные, потянув вниз;
* если при старте приложения сеть есть, то данные из БД удаляются; 
* если сети нет (или она пропала), то вверху экрана появляется TextView с сообщением об этом. Как только сеть появляется, TextView пропадает.

## Экран подробным описанием покемона
<img src="https://i.ibb.co/FHVZxnS/details-cherniak.png" width="300"> <img src="https://i.ibb.co/bHGhHqf/details-error-cherniak.png" width="300">

**Экран включает:**
* Toolbar с названием экрана, в которое с помощью аргументов Navigation Component передаётся имя покемона;
* ImageView для изображения покемона;
* два ImageView для отображения иконок роста и веса покемона, а также View в качестве разделителя между иконками;
* два TextView для отображения численных значений роста и веса покемона;
* RecyclerView для отображения способностей, форм и характеристик покемона;
* в RecyclerView используется два вида элементов - первый с TextView и ImageView (используется как кнопка) для отображения категории, а второй с одним TextView для отображения элементов определённой категории; 
* в верху экрана находится TextView с сообщением об отсутствии сети;
* по центру экрана находится TextView с сообщением об отсутствии данных;
* по центру экрана находится ProgressBar видимый в процессе загрузки данных;
* основной контейнер - LinearLayout, внутри которого находится Toolbar, TextView с сообщением об отсутствии сети и NestedScrollView, который оборачивает все остальные элементы экрана, помещённые в ConstraintLayout. 

**Поведение:**
* Изначально данные берутся из базы данных, если с БД произошла ошибка, то данные запрашиваются из сети;
* если данные отсутствуют, то будет показан TextView с соответствующим сообщением; 
* при нажатии на ImageView на элементе категории в списке RecyclerView, в список добавятся все элементы из этой категории. При повторном нажатии на ImageView все элементы категории будут удалены из списка;
* если сети нет (или она пропала), то вверху экрана появляется TextView с сообщением об отсутствии сети. Как только сеть появляется, TextView пропадает.

